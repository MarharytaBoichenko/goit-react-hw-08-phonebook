(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{15:function(e,t,n){e.exports={form:"ContactForm_form__1fuOn",button:"ContactForm_button__1MLZK",nameInput:"ContactForm_nameInput__1yxA2",inputLabel:"ContactForm_inputLabel__3ilUb",label:"ContactForm_label__378f8"}},19:function(e,t,n){e.exports={contactItem:"ContactItem_contactItem__5eHQm",contactName:"ContactItem_contactName__3Zp2H",contactNumber:"ContactItem_contactNumber__Lf19i"}},24:function(e,t,n){e.exports={label:"Filter_label__3DcZT",inputLabel:"Filter_inputLabel__KDsXr",filterInput:"Filter_filterInput__u16Kg"}},27:function(e,t,n){e.exports={item:"ContactList_item__3YsZK",button:"ContactList_button__1RuFy"}},39:function(e,t,n){e.exports={container:"Container_container__3RIox"}},52:function(e,t,n){},53:function(e,t,n){e.exports={App:"App_App__16ZpL"}},77:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(22),o=n.n(a),s=n(13),u=n(4),i=n(38),l=(n(52),n(53),n(2)),b=n(7),j=n(6),d=n.n(j),p=n(14),f=n(10),O=n.n(f),h=n(3);O.a.defaults.baseURL="https://connections-api.herokuapp.com";var m=Object(h.c)("contacts/fetchContactsStatus",Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/contacts");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),x=Object(h.c)("contacts/addContactsStatus",function(){var e=Object(p.a)(d.a.mark((function e(t,n){var c,r,a,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.name,r=t.number,a=n.rejectWithValue,o={name:c,number:r},e.prev=3,e.next=6,O.a.post("/contacts",o);case 6:return s=e.sent,e.abrupt("return",s.data);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",a(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(h.c)("contacts/replaceContactsStatus",function(){var e=Object(p.a)(d.a.mark((function e(t,n){var c,r,a,o,s,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.id,r=t.name,a=t.number,o=n.rejectWithValue,s={name:r,number:a},e.prev=3,e.next=6,O.a.patch("/contacts/".concat(c),s);case 6:return u=e.sent,console.log(u),e.abrupt("return",u.data);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",o(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}()),v=Object(h.c)("contacts/deleteContactsStatus",function(){var e=Object(p.a)(d.a.mark((function e(t,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,O.a.delete("/contacts/".concat(t));case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),console.log(e.t0.response.data),e.abrupt("return",c(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),y=n(15),C=n.n(y),_=n(0);function w(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(b.a)(a,2),s=o[0],i=o[1],l=Object(u.c)((function(e){return e.contacts})),j=Object(u.b)(),d=function(){r(""),i("")};return Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.toLowerCase().trim(),c=l.find((function(e){return e.name.toLowerCase().trim()===t})),r=l.filter((function(e){return e.name.toLowerCase().trim()===t})).map((function(e){return e.id}));console.log(r[0]);var a=r[0];c?window.confirm("".concat(n," is already in contact,  do  you want to  replace ?"))&&(console.log("patch"),j(g({id:a,name:n,number:s})),d()):(console.log("add"),j(x({name:n,number:s})),d())},className:C.a.form,children:[Object(_.jsxs)("label",{className:C.a.inputLabel,children:[Object(_.jsx)("span",{className:C.a.label,children:" Name"}),Object(_.jsx)("input",{onChange:function(e){r(e.target.value)},type:"name",value:n,className:C.a.nameInput,required:!0})]}),Object(_.jsxs)("label",{className:C.a.inputLabel,children:[Object(_.jsx)("span",{className:C.a.label,children:" Number"}),Object(_.jsx)("input",{type:"tel",value:s,onChange:function(e){i(e.target.value)},className:C.a.nameInput,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0})]}),Object(_.jsx)("button",{type:"submit",className:C.a.button,children:"Add contact"})]})}var k=n(19),L=n.n(k),I=function(e){var t=e.id,n=e.name,c=e.number,r=Object(u.b)();return Object(_.jsxs)("div",{className:L.a.contactItem,children:[Object(_.jsxs)("p",{className:L.a.contactName,children:[" ","".concat(n,":")]})," ",Object(_.jsxs)("p",{className:L.a.contactNumber,children:[" ",c]}),Object(_.jsx)("button",{type:"button",className:L.a.button,onClick:function(){!function(e){r(v(e))}(t)},children:"Delete"})]})},N=n(27),S=n.n(N),F=n(23),R=Object(F.a)([function(e){return e.contacts},function(e){return e.filter}],(function(e,t){var n=t.toLowerCase();if(e)return e.filter((function(e){return e.name.toString().toLowerCase().includes(n)}))})),E=function(){var e=Object(u.b)();Object(c.useEffect)((function(){e(m())}),[e]);var t=Object(u.c)(R);return Object(_.jsx)("ul",{className:S.a.list,children:t.map((function(e){var t=e.id,n=e.name,c=e.number;return Object(_.jsx)("li",{className:S.a.item,children:Object(_.jsx)(I,{name:n,number:c,id:t})},t)}))})},U=(Object(h.b)("contacts/addContactsSuccess"),Object(h.b)("contacts/addContactsRequest"),Object(h.b)("contacts/addContactsError"),Object(h.b)("contacts/deleteContactsSuccess"),Object(h.b)("contacts/deleteContactsRequest"),Object(h.b)("contacts/deleteContactsError"),Object(h.b)("contacts/fetchContactsSuccess"),Object(h.b)("contacts/fetchContactsRequest"),Object(h.b)("contacts/fetchContactsError"),Object(h.b)("filter/change")),A=n(24),D=n.n(A),T=function(){var e=Object(u.b)();return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("label",{className:D.a.inputLabel,children:[Object(_.jsx)("span",{className:D.a.label,children:"Find contacts by name"}),Object(_.jsx)("input",{onChange:function(t){console.log(t.target.value),e(U(t.target.value))},type:"text",name:"filter",className:D.a.filterInput})]})})},q=function(e){var t=e.text;return Object(_.jsx)("h2",{children:t})},W=n(39),Z=n.n(W),H=function(e){var t=e.children;return Object(_.jsx)("div",{className:Z.a.container,children:t})},K=function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(s.b,{to:"/register",children:"Register"}),Object(_.jsx)(s.b,{to:"/login",children:"Login"})]})},V=function(e){return e.user.user.name},z=function(e){return e.user.isLoggedIn},B=function(e){return e.user.isRefreshing},G=function(){var e=Object(u.c)(z);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(s.b,{to:"/",children:"Home"}),e&&Object(_.jsx)(s.b,{to:"/contacts",children:"Contacts"})]})};O.a.defaults.baseURL="https://connections-api.herokuapp.com";var J={set:function(e){O.a.defaults.headers.common.Authorization="Bearer ".concat(e)},unset:function(){O.a.defaults.headers.common.Authorization=""}},M=Object(h.c)("user/register",function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/users/signup",t);case 3:return n=e.sent,console.log(n.data.token),J.set(n.data.token),e.abrupt("return",n.data);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),P=Object(h.c)("user/logIn",function(){var e=Object(p.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/users/login",t);case 3:return n=e.sent,c=n.data,console.log(J),J.set(c.token),e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),Q=Object(h.c)("user/logOut",Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{O.a.post("/users/logout"),J.unset()}catch(t){}case 1:case"end":return e.stop()}}),e)})))),X=Object(h.c)("user/fetchCurrentUser",function(){var e=Object(p.a)(d.a.mark((function e(t,n){var c,r,a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getState(),null!==(r=c.user.token)){e.next=5;break}return console.log("\u0422\u043e\u043a\u0435\u043d\u0430 \u043d\u0435\u0442, \u0443\u0445\u043e\u0434\u0438\u043c \u0438\u0437 fetchCurrentUser"),e.abrupt("return",n.rejectWithValue());case 5:return J.set(r),e.prev=6,e.next=9,O.a.get("/users/current");case 9:return a=e.sent,o=a.data,e.abrupt("return",o);case 14:e.prev=14,e.t0=e.catch(6);case 16:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}()),Y={register:M,logOut:Q,logIn:P,fetchCurrentUser:X},$=function(){var e=Object(u.c)(V),t=Object(u.b)();return Object(_.jsxs)("section",{children:[Object(_.jsxs)("p",{children:["Welcome, ",e]}),Object(_.jsx)("button",{type:"button",onClick:function(){t(Y.logOut())},children:"LogOut"})]})},ee=function(){var e=Object(u.c)(z);return Object(_.jsxs)("header",{children:[Object(_.jsx)(G,{}),e?Object(_.jsx)($,{}):Object(_.jsx)(K,{})]})},te=function(){return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(H,{children:[Object(_.jsx)(ee,{}),Object(_.jsx)(q,{text:"Phonebook"}),Object(_.jsx)(w,{}),Object(_.jsx)(q,{text:"Contacts"}),Object(_.jsx)(T,{}),Object(_.jsx)(E,{})]})})},ne=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(b.a)(a,2),s=o[0],i=o[1],l=Object(u.b)(),j=function(){r(""),i("")};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ee,{}),Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log({email:n,password:s}),l(Y.logIn({email:n,password:s})),j()},children:[Object(_.jsx)("label",{children:Object(_.jsx)("input",{type:"email",value:n,placeholder:"Enter  your email",onChange:function(e){r(e.target.value)}})}),Object(_.jsx)("label",{children:Object(_.jsx)("input",{type:"text",value:s,placeholder:"Enter  your password",onChange:function(e){i(e.target.value)}})}),Object(_.jsx)("button",{type:"submit",children:"LogIn"}),Object(_.jsx)("button",{type:"submit",children:"Login with Google"})]})]})},ce=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(b.a)(a,2),s=o[0],i=o[1],l=Object(c.useState)(""),j=Object(b.a)(l,2),d=j[0],p=j[1],f=Object(u.b)(),O=function(){r(""),i(""),p("")};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ee,{}),Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log({name:n,email:s,password:d}),f(Y.register({name:n,email:s,password:d})),O()},children:[Object(_.jsx)("label",{children:Object(_.jsx)("input",{type:"name",value:n,placeholder:"Enter  your name",onChange:function(e){r(e.target.value)}})}),Object(_.jsx)("label",{children:Object(_.jsx)("input",{type:"email",value:s,placeholder:"Enter  your email",onChange:function(e){i(e.target.value)}})}),Object(_.jsx)("label",{children:Object(_.jsx)("input",{type:"text",value:d,placeholder:"Enter  your password",onChange:function(e){p(e.target.value)},title:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 \u0446\u0438\u0444\u0440 \u0438 \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0445 \u0431\u0443\u043a\u0432 \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0438 \u043d\u0438\u0436\u043d\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430"})}),Object(_.jsx)("button",{type:"submit",children:"Register"}),Object(_.jsx)("button",{type:"submit",children:"Login with Google"})]})]})},re=function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ee,{}),Object(_.jsx)("main",{children:Object(_.jsx)("h2",{children:"Hello, I`m your phonebook"})})]})},ae=function(e){var t=e.children,n=e.redirectTo,c=void 0===n?"/":n;return Object(u.c)(z)?t:Object(_.jsx)(l.a,{to:c})},oe=function(e){var t=e.children,n=e.restricted,c=void 0!==n&&n,r=e.redirectTo,a=void 0===r?"/":r;return Object(u.c)(z)&&c?Object(_.jsx)(l.a,{to:a}):t};function se(){var e=Object(u.b)(),t=Object(u.c)(B);return Object(c.useEffect)((function(){e(Y.fetchCurrentUser())}),[e]),!t&&Object(_.jsxs)(l.d,{children:[Object(_.jsx)(l.b,{path:"/",element:Object(_.jsx)(oe,{children:Object(_.jsx)(re,{})})}),Object(_.jsx)(l.b,{path:"register",element:Object(_.jsx)(oe,{restricted:!0,children:Object(_.jsx)(ce,{})})}),Object(_.jsx)(l.b,{path:"login",element:Object(_.jsx)(oe,{restricted:!0,redirectTo:"/contacts",children:Object(_.jsx)(ne,{})})}),Object(_.jsx)(l.b,{path:"contacts",element:Object(_.jsx)(ae,{redirectTo:"/login",children:Object(_.jsx)(te,{})})})]})}var ue,ie,le,be,je=n(40),de=n.n(je),pe=n(16),fe=n(41),Oe=n.n(fe),he=n(5),me=n(28),xe=Object(h.d)([],(ue={},Object(he.a)(ue,m.fulfilled,(function(e,t){return t.payload})),Object(he.a)(ue,x.fulfilled,(function(e,t){return[].concat(Object(me.a)(e),[t.payload])})),Object(he.a)(ue,v.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Object(he.a)(ue,g.fulfilled,(function(e,t){return Object(me.a)(e).map((function(e){return console.log(t.payload),e.id===t.payload.id?t.payload:e}))})),ue)),ge=(Object(h.d)(null,(ie={},Object(he.a)(ie,x.rejected,(function(e,t){return t.payload})),Object(he.a)(ie,m.rejected,(function(e,t){return t.payload})),Object(he.a)(ie,m.pending,(function(){return null})),Object(he.a)(ie,v.rejected,(function(e,t){return t.payload})),Object(he.a)(ie,g.rejected,(function(e,t){return t.payload})),ie)),Object(h.d)(!1,(le={},Object(he.a)(le,m.pending,(function(){return!0})),Object(he.a)(le,m.fulfilled,(function(){return!1})),Object(he.a)(le,m.rejected,(function(){return!1})),Object(he.a)(le,x.pending,(function(){return!0})),Object(he.a)(le,x.fulfilled,(function(){return!1})),Object(he.a)(le,x.rejected,(function(){return!1})),Object(he.a)(le,v.pending,(function(){return!0})),Object(he.a)(le,v.fulfilled,(function(){return!1})),Object(he.a)(le,v.rejected,(function(){return!1})),Object(he.a)(le,g.pending,(function(){return!0})),Object(he.a)(le,g.rejected,(function(){return!1})),Object(he.a)(le,g.fulfilled,(function(){return!1})),le)),Object(h.d)("",Object(he.a)({},U,(function(e,t){return console.log(t),console.log(t.payload),t.payload})))),ve=Object(h.d)({user:{name:null,email:null},token:null,isLoggedIn:!1,isRefreshing:!1},(be={},Object(he.a)(be,Y.register.fulfilled,(function(e,t){console.log(t.payload),e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(he.a)(be,Y.logIn.fulfilled,(function(e,t){console.log(t.payload),e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(he.a)(be,Y.logOut.fulfilled,(function(e,t){console.log(t.payload),e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(he.a)(be,Y.fetchCurrentUser.pending,(function(e,t){e.isRefreshing=!0})),Object(he.a)(be,Y.fetchCurrentUser.fulfilled,(function(e,t){console.log(t.payload),e.user=t.payload,e.isLoggedIn=!0,e.isRefreshing=!1})),be)),ye={key:"authtoken",storage:Oe.a,whitelist:["token"]},Ce=Object(h.a)({reducer:{contacts:xe,filter:ge,user:Object(pe.g)(ye,ve)},middleware:function(e){return e({serializableCheck:{ignoredActions:[pe.a,pe.f,pe.b,pe.c,pe.d,pe.e]}}).concat(de.a)},devTools:!1}),_e={store:Ce,persistor:Object(pe.h)(Ce)};o.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(u.a,{store:_e.store,children:Object(_.jsx)(i.a,{loading:null,persistor:_e.persistor,children:Object(_.jsx)(s.a,{children:Object(_.jsx)(se,{})})})})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.3b932879.chunk.js.map